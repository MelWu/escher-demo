<!DOCTYPE html> <!-- required -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    <!-- #1 -->
    <link rel="stylesheet" href="//zakandrewking.github.io/escher/escher/css/builder.css">

    <style>
      #map {
       width: 100%; 
       height: 500px; 
       border: 1px solid #DDD; 
       border-radius: 4px;
     }
    </style>
    <!-- #1 -->
    
  </head>
  <body>		
    <div class="navbar navbar-default" role="navigation">
      <div class="container">
	<div class="navbar-header">
	  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	    <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
	</div>	
	<div class="navbar-collapse collapse ">
	  <form class="navbar-form navbar-left" role="search">
	    <button type="submit" class="btn btn-default">Search</button>
	    <div class="form-group">
	      <input type="text" class="form-control" placeholder="Search">
	    </div>	    
	</div>
      </div>			
    </div>
    <div class="container">
      <div class="col-lg-8">
    	<h1>Reaction: <br><span style="text-transform:capitalize;">GAPD</span></h1>
    	<hr>
	<p class="lead">Reaction name: <br>glyceraldehyde-3-phosphate dehydrogenase</p>
	<p class="lead">Model: <br><a href="/models/{{model}}">iJO1366</a></p>
	
	<p class="lead">Reaction String:</p>
	pi_c + nad_c + g3p_c <=> nadh_c + h_c + 13dpg_c
	<br>
	<br>
	<br>
	<div class="list-group">
  	  <a href="#metabolitelist" class="list-group-item active">
    	    <span class="lead">Metabolites:</span>
  	  </a>
  	  <a href="/models/{{model}}/metabolites/{{metabolite}}" class="list-group-item">pi</a>
  	  <a href="/models/{{model}}/metabolites/{{metabolite}}" class="list-group-item">nad</a>
  	  <a href="/models/{{model}}/metabolites/{{metabolite}}" class="list-group-item">g3p</a>
  	  <a href="/models/{{model}}/metabolites/{{metabolite}}" class="list-group-item">nadh</a>
  	  <a href="/models/{{model}}/metabolites/{{metabolite}}" class="list-group-item">13dpg</a>
	</div>
	<p class="lead">Gene Reaction Rule: <br>b1779</p>
	<p class="lead">Genes: <a href=/models/{{model}}/genes/{{gene}}>b1779</a></p>
	<hr>
	<h2> Map </h2>

	<!-- #2 -->
	<div id="map"></div>
	<!-- #2 -->

	<p></p>
        <a class="btn btn-primary" href="#">Read More <span class="glyphicon glyphicon-chevron-right"></span></a>
	<p></p>
	<p></p>
      </div>
      <div class="col-lg-4">
	<div class="well">
          <h4>BiGG Search</h4>
          <div class="input-group">
      	    <span class="input-group-btn">
              <button class="btn btn-default" type="button">Go!</button>
      	    </span>
      	    <input type="text" class="form-control">
    	  </div>
        </div>
        <div class="well">
          <h4>Citations</h4>
          <ul class="list-unstyled">
            <li><a href="#dinosaurs">Dinosaurs</a>
            </li>
            <li><a href="#spaceships">Spaceships</a>
            </li>
            <li><a href="#fried-foods">Fried Foods</a>
            </li>
            <li><a href="#wild-animals">Wild Animals</a>
            </li>
          </ul>
        </div>
      </div>
      
    </div>
  </body>


    <!-- #3 -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
    <script src="//zakandrewking.github.io/escher/escher.1.0.0b2.js"></script>
    <!-- #3 -->


    <!-- #4 -->
    <script>

    // Set up map and styles
    // Requires two local files:  iJO1366_central_metabolism.json and builder-embed.css
    var b = escher.Builder({ selection: d3.select('#map'),
			     menu: 'zoom',
			     map_path: 'iJO1366_central_metabolism.json',
			     css_path: 'builder-embed.css',
			     reaction_data: {'GAPD': 1},
			     reaction_styles: ['color'],
			     auto_reaction_domain: false,
			     reaction_domain: [-1, 0, 1],
			     reaction_color_range: ['unused', 'rgb(200,200,200)', '#106F94'],
			     enable_editing: false });

    // find the reaction or metabolite, and zoom in on it
    window.setTimeout(function() {
	var results = b.map.search_index.find('GAPD');
	if (results !== null && results.length > 0) {
	    var r = results[0];
	    if (r.type=='reaction') {		
		b.map.zoom_to_reaction(r.reaction_id);
		b.map.highlight_reaction(r.reaction_id);
	    } else if (r.type=='metabolite') {
		b.map.zoom_to_node(r.node_id);
		b.map.highlight_node(r.node_id);
	    }
	}
    }, 1000);

    </script>
    <!-- #4 -->

</html>
